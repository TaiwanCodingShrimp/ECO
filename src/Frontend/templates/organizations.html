{% extends 'base.html' %}

{% block title %}篩選社福機構和食物銀行{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-4">選擇附近的社福機構和食物銀行</h1>
    <form method="GET" class="form-inline my-4">
        <div class="form-group mr-2">
            <label for="type" class="mr-2">選擇類型:</label>
            <select id="type" name="type" class="form-control" onchange="this.form.submit()">
                <option value="organization" {% if selected_type == 'organization' %}selected{% endif %}>社福機構</option>
                <option value="food_bank" {% if selected_type == 'food_bank' %}selected{% endif %}>食物銀行</option>
            </select>
        </div>
        <div class="form-group mr-2">
            <label for="county" class="mr-2">選擇縣市:</label>
            <select id="county" name="county" class="form-control" onchange="this.form.submit()">
                <option value="">所有縣市</option>
                {% for c in counties %}
                    <option value="{{ c }}" {% if c == selected_county %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group mr-2">
            <label for="district" class="mr-2">選擇地區:</label>
            <select id="district" name="district" class="form-control" onchange="this.form.submit()">
                <option value="">所有地區</option>
                {% for d in districts %}
                    <option value="{{ d }}" {% if d == selected_district %}selected{% endif %}>{{ d }}</option>
                {% endfor %}
            </select>
        </div>
    </form>

    <h2>結果</h2>
    <ul class="list-group">
        {% for org in organizations %}
            <li class="list-group-item">
                <strong>{{ org.name }}</strong><br>
                地址: {{ org.address }}<br>
                {% if selected_type == 'organization' %}
                電話: {{ org.phone }}
                {% else %}
                電話: {{ org.contact }}
                {% endif %}
            </li>
        {% endfor %}
        {% if organizations|length == 0 %}
            <li class="list-group-item">沒有找到符合條件的結果。</li>
        {% endif %}
    </ul>
</div>
{% endblock %}
